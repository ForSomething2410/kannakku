<html>
<head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>investment</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <style>
    body {
    background: #0d0d0d;
    color: #e0e0e0;
    font-family: sans-serif;
    padding: 1rem;
    max-width: 28rem;
    margin: 0 auto;
    }
    
    .hd {
    display: flex;
    align-items: center;
    justify-content:left;
    position: relative;
    margin:0px;
    }
    
    .hd h1 {
    font-size: 1.125rem;
    font-weight: 400;
    color: #f0f0f0;
    text-align:left;
    }
    
    .l, .r {
    position: absolute;
    display: flex;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 300;
    color: #b0b0b0;
    }
    
    .l {
    left: 0;
    }
    
    .r {
    right: 0;
    align-items: center;
    }
    
    .btn-add {
    width: 1.75rem;
    height: 1.75rem;
    border: 1px solid #333;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.125rem;
    font-weight: 300;
    line-height: 1;
    background: #1a1a1a;
    color: #ccc;
    cursor: pointer;
    }
    
    .main {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
    }
    
    .btn {
    width: 100%;
    border: 1px solid #444;
    border-radius: 0.375rem;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    font-weight: 400;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1a1a1a;
    color: #f0f0f0;
    }
    
    .btn:hover {
    background: #222;
    }
    
    .val {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: #9ee9ff;
    }
    
    .sec h2 {
    font-size: 1rem;
    font-weight: 400;
    margin-bottom: 0.5rem;
    color: #f0f0f0;
    }
    
    .box, .box2 {
    border: 1px solid #333;
    border-radius: 0.375rem;
    font-size: 1rem;
    font-weight: 400;
    margin-bottom: 1rem;
    background: #1a1a1a;
    }
    
    .row {
    display: flex;
    justify-content: space-between;
    border-bottom: 1px solid #333;
    padding: 0.75rem 1rem;
    background: #141414;
    color: #ddd;
    }
    
    .row span:first-child {
   color: #a0e49d;
    font-weight: 500;
    }
    
    .row span:last-child {
    color: #ffb56b; 
    }
    
    .txt {
    padding: 0.75rem 1rem;
    width: 90%;
    overflow-x: scroll;
    color: #d0d0d0; 
    font-size: 0.9rem;
    line-height: 1.4;
    display:flex;
    flex-direction:column;
    }
    .txt font:last-child{
    margin-top:15px;
    }
    
    .txt font:first-child{
    font-size:1.3rem;
    }
    
    .box2 {
    padding: 0.75rem 1rem;
    }
    
    .bar {
    margin-top: 0.5rem;
    height: 1rem;
    border-top: 1px solid #000;
    }
    
    .als {
    display: flex;
    background: #1a1a1a;
    justify-content: space-between;
    margin: 1px;
    border: 1px solid #333;
    padding:9px;
    border-radius:0.375rem;
    
    }
    
    .inc {
    display: flex;
    flex-direction: column;
    justify-content: center;
    }
    
    .incadd {
    display: flex;
    flex-direction: column;
    justify-content: center;
    }
    
    #allbl {
    font-size: 1.5rem;
    color: #a0e49d;
    }
    
    #allex {
    color: #ff9b6b;
    }
    
    #allbal {
    color: #a0e49d;
    }
    
    #incadi {
    font-size: 1.6rem;
    text-align: center;
    color: #8aff8a;
    }
    
    .swal2-input {
    width: 90%;
    box-sizing: border-box;
    background-color: white;
    color: black;
    border: 1px solid #444;
    border-radius: 6px;
    padding: 8px;
    font-size: 18px;
    margin: 6px auto;
    display: block;
    color:black;
    }
    
    .swal2-input::placeholder {
    color: black;
    }
    
    .swal2-popup {
    background-color: white;
    color: #eee;
    }
    
    .swal2-title {
    color: black;
    }
    .swal2-text{
    color:black;
    }
    
    
    .trh{
    display: flex;
    background: #1a1a1a;
    justify-content: space-between;
    align-items:center;
    margin: 1px;
    border: 1px solid #333;
    padding:9px;
    color:red;
    border-radius:0.375rem;
    
    }
    
    .trh font:last-child{
    font-size:1.6rem;
    }
    
    
    .teic{
    display:flex;
    gap:25px;
    }
    .teic i{
    color:white;
    }
    
  </style>
</head>
<body>
  <header class="hd">
    <h1> Inv3stments</h1>
    
  </header>
<hr width="100%">
<br>
<div class="als">

<div class="inc">
   <font id="allbl"> 0</font>
</div>
<div class="incadd">
<font id="incadi" onclick="aamt()"> + </font>
</div>

</div>

<br>
<div class="trh">
    <font id="alli"> Inveatments 12345</font> <font onclick="addDiv()"> + </font>
    </div>
    <br>
  <section class="sec" id="allinv">
    
   <!-- 
    <div class="box">
      <div class="row"><span>1234</span><span>ten</span> <span class="teic"> <i class="bi bi-trash" onclick="rdiv(this);"> </i> <i class="bi bi-pencil"> </i></span></div>
      <div class="txt" > <font>ABCD.ltd </font> <font> Shares56 </font> <font> Buying Prize 56</font> <font> skskwke wjwjw wbw w bw</font></div>
    </div>
    -->
    
    
    
  </section>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <script type="text/javascript">
  
  
  
  function aamt() {
  let el = document.getElementById('allbl');
  
  getXbig(data => { 
  let cfg = JSON.parse(JSON.stringify(data)); 
  let yjt = parseInt(cfg["buff"]);
  
  
  Swal.fire({
  title: `AB : ${yjt}`,
  input: 'number',
  inputAttributes: {
  min: 0,
  step: 'any',
  style: 'width:90%;'
  },
  showCancelButton: true,
  confirmButtonText: 'Add'
  }).then(r => {
  if (r.isConfirmed) {
  if (yjt < parseInt(r.value)) {
  Swal.fire({ title: "u dont jssjjs" });
  return;
  }
  
  let v = parseFloat(r.value);
  if (isNaN(v)) return;
  
  let c = parseFloat(el.textContent) || 0;
  let chj = parseFloat(el.textContent);
  el.textContent = chj + v;
  
  addX(c + v);
  addX1(c - v);
  }
  });
  });
  }
  
  async function addDiv() {
  
    let cfd = parseInt(document.getElementById("allbl").innerText);
     if(cfd==0){
      Swal.fire({title:"U dont have money"});
      return;
     }
  const { value: v } = await Swal.fire({
  title: 'Enter',
  html:
  `<h3 style="color:black;">AB : ${cfd}</h3>`+
  `<input id="a" type="number" class="swal2-input" placeholder="Amount">` +
  `<input id="d" type="date" class="swal2-input">` +
  `<input id="m" type="text" class="swal2-input" placeholder=" Company Name">`+
  `<input id="m1" type="number" class="swal2-input" placeholder=" Total Share">`+
  `<input id="m2" type="number" class="swal2-input" placeholder=" Buying Prize">`+
  `<input id="m3" type="text" class="swal2-input" placeholder="Description">`,
  focusConfirm: false,
  showCancelButton: false,
  showCloseButton:true,
  preConfirm: () => {
  const a = document.getElementById('a').value;
  const d = document.getElementById('d').value;
  const m = document.getElementById('m').value;
  const m1 = document.getElementById('m1').value;
  const m2 = document.getElementById('m2').value;
  const m3 = document.getElementById('m3').value;
  if (!a || !d || !m || !m1 || !m2 || !m3) {
  Swal.showValidationMessage('All required');
  return false;
  }
  return { a, d, m ,m1,m2,m3};
  }
  });
  
  if (!v) return;
  
  const e = document.createElement('div');
  e.innerHTML = `
  <div class="box">
  <div class="row"><span> ${v.a}</span><span>${v.d}</span> <span class="teic"> <i class="bi bi-trash" onclick="rdiv(this);"> </i> <i class="bi bi-pencil"> </i></span> </div>
  <div class="txt"> <font> ${v.m}</font> <font> Shares ${v.m1} </font> <font> Buying Prize ${v.m2}</font> <font> ${v.m3}</font> </div>
  </div>
  `;
  
  if(parseInt(cfd) <= parseInt(v.a)){
  Swal.fire({title:"U dont have enlught money"});
  return;
  }
  
  document.getElementById('allinv').prepend(e);
  getSum();
  addDB();
  
  let cs= parseInt(document.getElementById('allbl').innerText);
  let al= cs-parseInt(v.a);
  addX(al);
  document.getElementById('allbl').innerText=al;
  }
  
  
  function gadd() {
  return [...document.querySelectorAll('.box')].map(b => {
  const r = b.querySelectorAll('.row span')
  const t = b.querySelectorAll('.txt font')
  return {
  r: [r[0]?.textContent.trim(), r[1]?.textContent.trim()],
  t: [...t].map(e => e.textContent.trim())
  }
  })
  }
  
  function cadd(d) {
  d.forEach(x => {
  const b = document.createElement('div')
  b.className = 'box'
  const r = document.createElement('div')
  r.className = 'row'
  const s1 = document.createElement('span');
  s1.textContent = x.r[0];
  const s2 = document.createElement('span');
  s2.textContent = x.r[1];
  const s3 = document.createElement('span');
  s3.className = 'teic';
  s3.innerHTML = `<i class="bi bi-trash" onclick="rdiv(this);"></i> <i class="bi bi-pencil"></i>`;
  r.appendChild(s1);
  r.appendChild(s2);
  r.appendChild(s3);
  const t = document.createElement('div')
  t.className = 'txt'
  x.t.forEach(y => {
  const f = document.createElement('font')
  f.textContent = y
  t.appendChild(f)
  })
  b.appendChild(r)
  b.appendChild(t)
  document.getElementById('allinv').appendChild(b);
  })
  
  getXbig(data => { 
  let cfg= JSON.parse(JSON.stringify(data)); 
  document.getElementById('allbl').innerText= cfg["inc"];
  
  });
  
  }
  
  
  
  function addDB(){
  let dada= JSON.stringify(gadd());
  const r = indexedDB.open("black");
  r.onsuccess = e => {
  const d = e.target.result;
  const t = d.transaction(["sst"], 'readwrite');
  const o = t.objectStore("sst");
  o.put(dada, "blackroadbuffIN");
  };
  
  }
  
  function readDB() {
  const r = indexedDB.open("black")
  r.onsuccess = e => {
  const d = e.target.result
  const t = d.transaction(["sst"], "readonly")
  const o = t.objectStore("sst").get("blackroadbuffIN")
  o.onsuccess = () => cadd(JSON.parse((o.result)))
  }
  }
  
  
  
  
  
  
  function rdiv(e) {
  let val= parseInt(e.parentNode.parentNode.children[0].innerText);
  
  var box = e.closest('.box');
  box.remove();
  getSum();
  addDB();
  
  getXbig(data => { 
  let cfg= JSON.parse(JSON.stringify(data)); 
  let ct= parseInt(cfg["inc"])+val;
  document.getElementById('allbl').innerText= ct;
  addX(ct);
  
  });
  }
  
  function getSum() {
  let sum = 0;
  document.querySelectorAll('.row').forEach(r => {
  const val = parseFloat(r.children[0].innerText);
  if (!isNaN(val)) sum += val;
  });
    document.getElementById("alli").innerText=` Investments ${sum}`;
  }
  
  getSum();
  readDB();
  
  
  
  
  function getXbig(callback) {
  let r = indexedDB.open("black");
  
  r.onsuccess = e => {
  let db = e.target.result;
  if (!db.objectStoreNames.contains("sst")) return;
  
  let tx = db.transaction("sst", "readonly");
  let store = tx.objectStore("sst");
  
  let g = store.get("xbig");
  g.onsuccess = () => {
  callback(g.result);
  };
  };
  }
  
   getXbig(data => { 
    let cfg= JSON.parse(JSON.stringify(data)); 
    document.getElementById('allbl').innerText= cfg["inc"];
    getSum();
   });
  
  function addToXbig(add) {
  let r = indexedDB.open("black");
  
  r.onsuccess = e => {
  let db = e.target.result;
  if (!db.objectStoreNames.contains("sst")) return;
  
  let tx = db.transaction("sst", "readwrite");
  let store = tx.objectStore("sst");
  
  let g = store.get("xbig");
  
  g.onsuccess = () => {
  let data = g.result || { buff: 0, inc: 0, sav: 0, oth: 0 };
  
  // Add values
  data.inc  = add.inc  || 0;
  
  store.put(data, "xbig");
  };
  };
  }
  
  function addX(bu){
  addToXbig({ inc:bu});
  }
  
  function addX1(bu){
  addToXbig11({ buff:bu});
  }
  
  function addToXbig11(add) {
  let r = indexedDB.open("black");
  
  r.onsuccess = e => {
  let db = e.target.result;
  if (!db.objectStoreNames.contains("sst")) return;
  
  let tx = db.transaction("sst", "readwrite");
  let store = tx.objectStore("sst");
  
  let g = store.get("xbig");
  
  g.onsuccess = () => {
  let data = g.result || { buff: 0, inc: 0, sav: 0, oth: 0 };
  
  // Add values
  data.buff  = add.buff  || 0;
  
  store.put(data, "xbig");
  };
  };
  }
  
  //addX(0);
  
  
  
  </script>
</body>
</html>